<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>DL Machine系列-03 Docker - Augustus&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Augustus&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Augustus&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="前言網路上關於Docker的資訊已經有很多了，這邊就不多作介紹了，只針對幾個常用和在我的實作上有用到的指令和套件去做介紹。 用一張圖來簡單的說明Docker的架構："><meta property="og:type" content="blog"><meta property="og:title" content="DL Machine系列-03 Docker"><meta property="og:url" content="https://augustushsu.github.io/2019/12/23/DeepLearning-03/"><meta property="og:site_name" content="Augustus&#039;s Blog"><meta property="og:description" content="前言網路上關於Docker的資訊已經有很多了，這邊就不多作介紹了，只針對幾個常用和在我的實作上有用到的指令和套件去做介紹。 用一張圖來簡單的說明Docker的架構："><meta property="og:locale" content="zh_TW"><meta property="og:image" content="https://augustushsu.github.io/gallery/thumbnails/docker.jpg"><meta property="article:published_time" content="2019-12-23T12:03:26.000Z"><meta property="article:modified_time" content="2021-11-27T18:52:26.285Z"><meta property="article:author" content="Augustus Hsu"><meta property="article:tag" content="xrdp"><meta property="article:tag" content="docker"><meta property="article:tag" content="Dockerfile"><meta property="article:tag" content="portainer"><meta property="article:tag" content="anaconda"><meta property="article:tag" content="cuda"><meta property="article:tag" content="cudnn"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/gallery/thumbnails/docker.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://augustushsu.github.io/2019/12/23/DeepLearning-03/"},"headline":"DL Machine系列-03 Docker","image":["https://augustushsu.github.io/gallery/thumbnails/docker.jpg"],"datePublished":"2019-12-23T12:03:26.000Z","dateModified":"2021-11-27T18:52:26.285Z","author":{"@type":"Person","name":"Augustus Hsu"},"publisher":{"@type":"Organization","name":"Augustus's Blog","logo":{"@type":"ImageObject","url":{"text":"Augustus"}}},"description":"前言網路上關於Docker的資訊已經有很多了，這邊就不多作介紹了，只針對幾個常用和在我的實作上有用到的指令和套件去做介紹。 用一張圖來簡單的說明Docker的架構："}</script><link rel="canonical" href="https://augustushsu.github.io/2019/12/23/DeepLearning-03/"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/xt256.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-154556648-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-154556648-1');</script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Augustus</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="My GitHub" href="https://augustushsu.github.io/"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="文章目錄" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜尋" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-12-23T12:03:26.000Z" title="12/23/2019, 12:03:26 PM">2019-12-23</time>發表</span><span class="level-item"><time dateTime="2021-11-27T18:52:26.285Z" title="11/27/2021, 6:52:26 PM">2021-11-27</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/DL-Machine/">DL Machine</a></span><span class="level-item">14 分鐘讀完 (大約2061個字)</span></div></div><h1 class="title is-3 is-size-4-mobile">DL Machine系列-03 Docker</h1><div class="content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>網路上關於Docker的資訊已經有很多了，這邊就不多作介紹了，只針對幾個常用和在我的實作上有用到的指令和套件去做介紹。</p>
<p>用一張圖來簡單的說明Docker的架構：</p>
<span id="more"></span>

<p><img src="docker-containerized&vm.png" alt="Architecture"></p>
<h2 id="Portainer"><a href="#Portainer" class="headerlink" title="Portainer"></a>Portainer</h2><p>Portainer是一個用來管理Docker的工具，他可以透過網頁來查看或管理目前執行的container等等，也可以很快速地進入一個正在執行的container，簡而言之就是一種用來管理Docker的圖形化介面。</p>
<h3 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h3><p>可以用<code>docker search portainer</code>來查看目前有哪些可以用的資源：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo docker search portainer</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">NAME                             DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">portainer/portainer              Making Docker management easy. https://porta…   1439</span><br><span class="line">portainer/agent                  An agent used to manage all the resources <span class="keyword">in</span>…   50</span><br><span class="line">portainer/templates              App Templates <span class="keyword">for</span> Portainer http://portainer…   18</span><br></pre></td></tr></table></figure>

<p>下載：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull portainer/portainer</span><br></pre></td></tr></table></figure>

<p>依據官方的文件啟動container，當然你可以自訂你想要的port (第一個是host port，第二個是container port)：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker volume create portainer_data</span><br><span class="line">docker run -d -p 9000:9000 \</span><br><span class="line">--name portainer \</span><br><span class="line">--restart always \</span><br><span class="line">-v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">-v portainer_data:/data \</span><br><span class="line">portainer/portainer</span><br></pre></td></tr></table></figure>

<p>打開瀏覽器就能看到：</p>
<p><img src="portainer.png" alt="Portainer"></p>
<p>這樣就可以管理docker的<code>image</code>、<code>container</code>跟<code>volume</code>，還可以看到其他的資源。</p>
<h3 id="常用Docker指令"><a href="#常用Docker指令" class="headerlink" title="常用Docker指令"></a>常用Docker指令</h3><p>記錄一些常用的Docker指令，以備不時之需，不過我想<code>protainer</code>應該可以取代大部分功能：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看目前的image</span></span><br><span class="line">docker images</span><br><span class="line"><span class="comment"># 刪除image</span></span><br><span class="line">docker rmi [OPTIONS] IMAGE [IMAGE...]</span><br><span class="line"><span class="comment"># 查看目前運行的 container</span></span><br><span class="line">docker ps</span><br><span class="line"><span class="comment"># 查看目前全部的 container（ 包含停止狀態的 container ）</span></span><br><span class="line">docker ps -a</span><br><span class="line"><span class="comment"># 停止 Container</span></span><br><span class="line">docker stop [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line"><span class="comment"># 删除 Container</span></span><br><span class="line">docker rm [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line"><span class="comment"># 查看 Container 詳細資料</span></span><br><span class="line">docker inspect [OPTIONS] NAME|ID [NAME|ID...]</span><br><span class="line"><span class="comment"># 查看 log</span></span><br><span class="line">docker logs [OPTIONS] CONTAINER</span><br><span class="line"><span class="comment"># 顯示容器資源 ( CPU , I/O ...... )</span></span><br><span class="line">docker stats [OPTIONS] [CONTAINER...]</span><br><span class="line"><span class="comment"># 停止指定的 CONTAINER 中全部的 processes</span></span><br><span class="line">docker pause CONTAINER [CONTAINER...]</span><br><span class="line"><span class="comment"># 恢復指定暫停的 CONTAINER 中全部的 processes</span></span><br><span class="line">docker unpause CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>docker stop</code> : process 級別。</p>
<p><code>docker pause</code>: container 級別。</p>
</blockquote>
<h2 id="實作Deep-Learning環境"><a href="#實作Deep-Learning環境" class="headerlink" title="實作Deep Learning環境"></a>實作Deep Learning環境</h2><p>我這裡選擇的image是<code>ubuntu18.04</code>，然後透過<code>ARG</code>來新增使用者：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">18.04</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> jim jimhsu11@gmail.com</span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> USERNAME</span><br><span class="line"><span class="keyword">ARG</span> USERPWD</span><br></pre></td></tr></table></figure>

<h3 id="DEBIAN-FRONTEND-noninteractive"><a href="#DEBIAN-FRONTEND-noninteractive" class="headerlink" title="DEBIAN_FRONTEND noninteractive"></a>DEBIAN_FRONTEND noninteractive</h3><p>接下來這個步驟很重要：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># debconf to be non-interactive</span></span><br><span class="line"><span class="keyword">ENV</span> DEBIAN_FRONTEND noninteractive</span><br></pre></td></tr></table></figure>

<p>因為<code>ubuntu</code>在安裝的時候，某些套件會需要輸入指令，這邊將它設定成<strong>沒有交互介面</strong>的模式來安裝。</p>
<h3 id="Add-User"><a href="#Add-User" class="headerlink" title="Add User"></a>Add User</h3><p>接著就是新增使用者，這邊新增使用者主要是為了之後的<code>xrdp</code>套件，在run docker的時候可以不用再去建立使用者，不過在build的時候要記得加上<code>ARG</code>參數:</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Update and Add User</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get install -y vim sudo wget \</span></span><br><span class="line"><span class="bash">    &amp;&amp; useradd -ms /bin/bash <span class="variable">$&#123;USERNAME&#125;</span>\</span></span><br><span class="line"><span class="bash">    &amp;&amp; sudo adduser <span class="variable">$&#123;USERNAME&#125;</span> sudo\</span></span><br><span class="line"><span class="bash">    &amp;&amp; <span class="built_in">echo</span> <span class="variable">$&#123;USERNAME&#125;</span>:<span class="variable">$&#123;USERPWD&#125;</span> | chpasswd</span></span><br></pre></td></tr></table></figure>

<h3 id="xrdp"><a href="#xrdp" class="headerlink" title="xrdp"></a>xrdp</h3><p>這邊安裝<code>xrdp</code>套件，讓Windows系統可以透過<code>遠端桌面連線</code>連線到Container：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># xrdp</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get install -y xfce4 xfce4-goodies xorg dbus-x11 x11-xserver-utils xrdp \</span></span><br><span class="line"><span class="bash">    &amp;&amp; <span class="built_in">echo</span> xfce4-session &gt; /home/<span class="variable">$&#123;USERNAME&#125;</span>/.xsession \</span></span><br><span class="line"><span class="bash">    &amp;&amp; sed -i <span class="string">&quot;s/^exec.*Xsession$/startxfce4/g&quot;</span> <span class="string">&quot;/etc/xrdp/startwm.sh&quot;</span> \</span></span><br><span class="line"><span class="bash">    &amp;&amp; service xrdp restart</span></span><br></pre></td></tr></table></figure>

<p>這邊跟一般安裝<code>xrdp</code>的過程一樣，其中<code>sed</code>是將<code>/etc/xrdp/startwm.sh</code>最後一行替換成<code>startxfce4</code>。</p>
<h3 id="Anaconda"><a href="#Anaconda" class="headerlink" title="Anaconda"></a>Anaconda</h3><p>這邊使用<a target="_blank" rel="noopener" href="https://www.anaconda.com/">Anaconda</a>來管理<code>python</code>的套件，雖然已經使用Docker來隔離系統了，不過還是習慣用Anaconda來建立python環境：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install Anaconda</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> wget --quiet https://repo.continuum.io/archive/Anaconda3-5.0.1-Linux-x86_64.sh -O ~/anaconda.sh \</span></span><br><span class="line"><span class="bash">    &amp;&amp; /bin/bash ~/anaconda.sh -b -p /opt/conda \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm ~/anaconda.sh \</span></span><br><span class="line"><span class="bash">    &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;export PATH=/opt/conda/bin:<span class="variable">$PATH</span>&quot;</span> &gt;&gt; /home/<span class="variable">$&#123;USERNAME&#125;</span>/.bashrc \</span></span><br><span class="line"><span class="bash">    &amp;&amp; sudo chown -R <span class="variable">$&#123;USERNAME&#125;</span>:<span class="variable">$&#123;USERNAME&#125;</span> /opt/conda</span></span><br></pre></td></tr></table></figure>

<p>這邊<code>wget</code>後面的網址可以自己去更改，找符合自己<a target="_blank" rel="noopener" href="https://repo.continuum.io/archive/">需求的版本</a>來安裝。</p>
<p>然後安裝Anaconda的時候會需要輸入一些指令，所以用<code>-b</code>使用預設值安裝。</p>
<p><code>-p</code>後面接的是安裝位置，這邊也可以自己去調整。</p>
<h3 id="cuda-amp-cudnn"><a href="#cuda-amp-cudnn" class="headerlink" title="cuda &amp; cudnn"></a>cuda &amp; cudnn</h3><p>我這邊cuda使用的版本是10.0，雖然在系統上是安裝的版本是10.1，不過經過測試，是不影響使用的。</p>
<p>我是使用Nvidia/cuda的Dockerfile指令來安裝<code>cuda</code>和<code>cudnn</code>，分別將<a target="_blank" rel="noopener" href="https://gitlab.com/nvidia/container-images/cuda/blob/ubuntu18.04/10.0/base/Dockerfile">nvidia/cuda:10.0-base-ubuntu18.04</a>、<a target="_blank" rel="noopener" href="https://gitlab.com/nvidia/container-images/cuda/blob/ubuntu18.04/10.0/runtime/Dockerfile">nvidia/cuda:10.0-runtime-ubuntu18.04</a>和<a target="_blank" rel="noopener" href="https://gitlab.com/nvidia/container-images/cuda/blob/ubuntu18.04/10.0/runtime/cudnn7/Dockerfile">nvidia/cuda:10.0-cudnn7-runtime-ubuntu18.04</a>上需要的Dockerfile指令，加到自己的Dockerfile：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-------------------From Nvidia-------------------</span></span><br><span class="line"><span class="comment"># Nvidia install list</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get install -y --no-install-recommends gnupg2 curl ca-certificates \</span></span><br><span class="line"><span class="bash">    &amp;&amp; curl -fsSL https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub | apt-key add - \</span></span><br><span class="line"><span class="bash">    &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;deb https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64 /&quot;</span> &gt; /etc/apt/sources.list.d/cuda.list \</span></span><br><span class="line"><span class="bash">    &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;deb https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64 /&quot;</span> &gt; /etc/apt/sources.list.d/nvidia-ml.list \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get purge --autoremove -y curl \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> CUDA_VERSION <span class="number">10.0</span>.<span class="number">130</span></span><br><span class="line"><span class="keyword">ENV</span> CUDA_PKG_VERSION <span class="number">10</span>-<span class="number">0</span>=$CUDA_VERSION-<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># For libraries in the cuda-compat-* package: https://docs.nvidia.com/cuda/eula/index.html#attachment-a</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get install -y --no-install-recommends \</span></span><br><span class="line"><span class="bash">        cuda-cudart-<span class="variable">$CUDA_PKG_VERSION</span> \</span></span><br><span class="line"><span class="bash">        cuda-compat-10-0 \</span></span><br><span class="line"><span class="bash">    &amp;&amp; ln -s cuda-10.0 /usr/<span class="built_in">local</span>/cuda \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> PATH /usr/local/nvidia/bin:/usr/local/cuda/bin:$&#123;PATH&#125;</span><br><span class="line"><span class="keyword">ENV</span> LD_LIBRARY_PATH /usr/local/nvidia/lib:/usr/local/nvidia/lib64</span><br><span class="line"><span class="keyword">ENV</span> NCCL_VERSION <span class="number">2.4</span>.<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get install -y --no-install-recommends \</span></span><br><span class="line"><span class="bash">        cuda-libraries-<span class="variable">$CUDA_PKG_VERSION</span> \</span></span><br><span class="line"><span class="bash">        cuda-nvtx-<span class="variable">$CUDA_PKG_VERSION</span> \</span></span><br><span class="line"><span class="bash">        libnccl2=<span class="variable">$NCCL_VERSION</span>-1+cuda10.0 \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-mark hold libnccl2 \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> CUDNN_VERSION <span class="number">7.6</span>.<span class="number">0.64</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> com.nvidia.cudnn.version=<span class="string">&quot;<span class="variable">$&#123;CUDNN_VERSION&#125;</span>&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get install -y --no-install-recommends \</span></span><br><span class="line"><span class="bash">            libcudnn7=<span class="variable">$CUDNN_VERSION</span>-1+cuda10.0 \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-mark hold libcudnn7 \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span><br><span class="line"><span class="comment">#-------------------Nvidia End-------------------</span></span><br></pre></td></tr></table></figure>

<p>這邊有試過用nvidia本身的image來建立，不過失敗了，後來將nvidia上Dockerfile複製自己需要的部分卻成功了，原因沒有深究，如果有人知道的話，歡迎留言告訴我。</p>
<p>以上就是我的Dockerfile所有的內容。</p>
<h2 id="Build-amp-Run-amp-Upload"><a href="#Build-amp-Run-amp-Upload" class="headerlink" title="Build &amp; Run &amp; Upload"></a>Build &amp; Run &amp; Upload</h2><p>上面可以看到我的功能是一層一層添加的，實際上實作完一層，我就會build和run一次那個Dockerfile，以確保我的Dockerfile沒有寫錯，所以接下來就是將剛剛寫完的Dockerfile建立起來。</p>
<h3 id="Build-Dockerfile"><a href="#Build-Dockerfile" class="headerlink" title="Build Dockerfile"></a>Build Dockerfile</h3><p>進入<code>Dockerfile</code>所在的資料夾，執行以下指令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo docker build -t image_name:tag \</span><br><span class="line">--build-arg USERNAME=username \</span><br><span class="line">--build-arg USERPWD=yourpassword .</span><br></pre></td></tr></table></figure>

<p><code>-t</code>後面接的是image的名字跟<code>tag</code>，<code>USERNAME</code>跟<code>USERPWD</code>就是登入系統時要輸入的帳密，這樣image就建立好了。</p>
<h3 id="Run-Image"><a href="#Run-Image" class="headerlink" title="Run Image"></a>Run Image</h3><p>執行下列命令就可以進入到創立的<code>container</code>了：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run --gpus device=1 -it \</span><br><span class="line">-p 33890:3389 \</span><br><span class="line">-v /mnt/SSD:/data/SSD \</span><br><span class="line">-v /mnt/HDD:/data/HDD \</span><br><span class="line">-v /docker_config/config:/config \</span><br><span class="line">image_name:tag</span><br></pre></td></tr></table></figure>

<p><code>--gpus</code>:可以指令你要用的gpu，當然是要你電腦上有安裝複數的gpu才能指令，不然可以直接用<code>--gpus all</code>來使用全部的gpu。</p>
<p><code>-p</code>:因為有使用<code>xrdp</code>套件，而這個套件使用的port是3389，所以要將container的port映射到主機上的port，這邊選擇加上一個0。</p>
<p><code>-v</code>:可以將主機上的資料夾位置映射到container上面，也可以是docker的volume映射到container上。這邊要注意的是冒號，冒號前是主機上的位置；後面是container上的位置。</p>
<p><code>-it</code>：建立好後會直接進入container。</p>
<p>接下來要啟動<code>xrdp</code>套件才可以連線進去，執行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service xrdp restart</span><br></pre></td></tr></table></figure>

<p>啟動<strong>遠端桌面連線</strong>程式，輸入你主機的ip：</p>
<p><img src="remote-desktop.png" alt="Remote Desktop"></p>
<p>再輸入前面設定的帳號密碼：</p>
<p><img src="login.png" alt="Login"></p>
<p>進入到你的環境後，要記得進入<code>Setting Manager</code>：</p>
<p><img src="settings-manager.png" alt="Settings Manager"></p>
<p>打開<code>Preferred Applications</code>：</p>
<p><img src="preferred-app.png" alt="Preferred App"></p>
<p>選擇<code>Utilities</code>，將預設的Terminal Emulator改成Xfce Terminal：</p>
<p><img src="xfce-terminal.png" alt="Xfce Terminal"></p>
<p>這樣就可以用Terminal了。</p>
<h3 id="Docker-Hub"><a href="#Docker-Hub" class="headerlink" title="Docker Hub"></a>Docker Hub</h3><p>實作完自己的Dockerfile之後，用<a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a>備份或是分享到網上。</p>
<p>第一步要當然是註冊一個帳號，再利用docker login來登入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker login</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">Login with your Docker ID to push and pull images from Docker Hub. If you don<span class="string">&#x27;t have a Docker ID, head over to https://hub.docker.com to create one.</span></span><br><span class="line"><span class="string">Username: username</span></span><br><span class="line"><span class="string">Password: yourpassword</span></span><br></pre></td></tr></table></figure>

<p>登入完，直接用docker push來上傳就行了:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push yourusername/image_name:tag</span><br></pre></td></tr></table></figure>

<h2 id="連結"><a href="#連結" class="headerlink" title="連結"></a>連結</h2><p>Docker Hub：<a target="_blank" rel="noopener" href="https://hub.docker.com/repository/docker/augustushsu/ubuntu18.04-xrdp">https://hub.docker.com/repository/docker/augustushsu/ubuntu18.04-xrdp</a></p>
<p>Github：<a target="_blank" rel="noopener" href="https://github.com/AugustusHsu/Docker-DL">https://github.com/AugustusHsu/Docker-DL</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>DL Machine系列-03 Docker</p><p><a href="https://augustushsu.github.io/2019/12/23/DeepLearning-03/">https://augustushsu.github.io/2019/12/23/DeepLearning-03/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Augustus Hsu</p></div></div><div class="level-item is-narrow"><div><h6>發表於</h6><p>2019-12-23</p></div></div><div class="level-item is-narrow"><div><h6>更新於</h6><p>2021-11-27</p></div></div><div class="level-item is-narrow"><div><h6>許可協議</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/xrdp/">xrdp</a><a class="link-muted mr-2" rel="tag" href="/tags/docker/">docker</a><a class="link-muted mr-2" rel="tag" href="/tags/Dockerfile/">Dockerfile</a><a class="link-muted mr-2" rel="tag" href="/tags/portainer/">portainer</a><a class="link-muted mr-2" rel="tag" href="/tags/anaconda/">anaconda</a><a class="link-muted mr-2" rel="tag" href="/tags/cuda/">cuda</a><a class="link-muted mr-2" rel="tag" href="/tags/cudnn/">cudnn</a></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_telegram"></a><a class="a2a_button_whatsapp"></a><a class="a2a_button_reddit"></a></div><script src="https://static.addtoany.com/menu/page.js" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2019/12/27/DeepLearning-04/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">DL Machine系列-04 Docker Hub Automated Build</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2019/12/19/DeepLearning-02/"><span class="level-item">DL Machine系列-02 建立LVM管理儲存空間</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">評論</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://augustushsu.github.io/2019/12/23/DeepLearning-03/';
            this.page.identifier = '2019/12/23/DeepLearning-03/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'augustus-blog' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/MyPhoto.jpg" alt="Augustus"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Augustus</p><p class="is-size-6 is-block">Strike the iron while it is hot</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>New Taipei City, Taiwan</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">16</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分類</p><a href="/categories"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">標籤</p><a href="/tags"><p class="title">41</p></a></div></div></nav></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">文章目錄</h3><ul class="menu-list"><li><a class="level is-mobile" href="#前言"><span class="level-left"><span class="level-item">1</span><span class="level-item">前言</span></span></a></li><li><a class="level is-mobile" href="#Portainer"><span class="level-left"><span class="level-item">2</span><span class="level-item">Portainer</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#安裝"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">安裝</span></span></a></li><li><a class="level is-mobile" href="#常用Docker指令"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">常用Docker指令</span></span></a></li></ul></li><li><a class="level is-mobile" href="#實作Deep-Learning環境"><span class="level-left"><span class="level-item">3</span><span class="level-item">實作Deep Learning環境</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#DEBIAN-FRONTEND-noninteractive"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">DEBIAN_FRONTEND noninteractive</span></span></a></li><li><a class="level is-mobile" href="#Add-User"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">Add User</span></span></a></li><li><a class="level is-mobile" href="#xrdp"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">xrdp</span></span></a></li><li><a class="level is-mobile" href="#Anaconda"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">Anaconda</span></span></a></li><li><a class="level is-mobile" href="#cuda-amp-cudnn"><span class="level-left"><span class="level-item">3.5</span><span class="level-item">cuda &amp; cudnn</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Build-amp-Run-amp-Upload"><span class="level-left"><span class="level-item">4</span><span class="level-item">Build &amp; Run &amp; Upload</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Build-Dockerfile"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">Build Dockerfile</span></span></a></li><li><a class="level is-mobile" href="#Run-Image"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">Run Image</span></span></a></li><li><a class="level is-mobile" href="#Docker-Hub"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">Docker Hub</span></span></a></li></ul></li><li><a class="level is-mobile" href="#連結"><span class="level-left"><span class="level-item">5</span><span class="level-item">連結</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分類</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/DL-Machine/"><span class="level-start"><span class="level-item">DL Machine</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/hexo/"><span class="level-start"><span class="level-item">hexo</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%AF%A6%E4%BD%9C/"><span class="level-start"><span class="level-item">實作</span></span><span class="level-end"><span class="level-item tag">6</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%AF%A6%E4%BD%9C/GAN/"><span class="level-start"><span class="level-item">GAN</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%AF%A6%E4%BD%9C/Neural-Network/"><span class="level-start"><span class="level-item">Neural Network</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><figure class="media-left"><a class="image" href="/2021/12/10/GAN-03/"><img src="/gallery/thumbnails/DCGAN.png" alt="GAN系列-03 Deep Convolutional Generative Adversarial Network"></a></figure><div class="media-content"><p class="date"><time dateTime="2021-12-10T06:00:00.000Z">2021-12-10</time></p><p class="title"><a href="/2021/12/10/GAN-03/">GAN系列-03 Deep Convolutional Generative Adversarial Network</a></p><p class="categories"><a href="/categories/%E5%AF%A6%E4%BD%9C/">實作</a> / <a href="/categories/%E5%AF%A6%E4%BD%9C/GAN/">GAN</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2021/12/04/GAN-02/"><img src="/gallery/thumbnails/CGAN%20Architecture.jpg" alt="GAN系列-02 Conditional Generative Adversarial Nets"></a></figure><div class="media-content"><p class="date"><time dateTime="2021-12-04T06:00:00.000Z">2021-12-04</time></p><p class="title"><a href="/2021/12/04/GAN-02/">GAN系列-02 Conditional Generative Adversarial Nets</a></p><p class="categories"><a href="/categories/%E5%AF%A6%E4%BD%9C/">實作</a> / <a href="/categories/%E5%AF%A6%E4%BD%9C/GAN/">GAN</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2021/12/03/GAN-01/"><img src="/gallery/thumbnails/GAN.png" alt="GAN系列-01 Generative Adversarial Network"></a></figure><div class="media-content"><p class="date"><time dateTime="2021-12-03T06:00:00.000Z">2021-12-03</time></p><p class="title"><a href="/2021/12/03/GAN-01/">GAN系列-01 Generative Adversarial Network</a></p><p class="categories"><a href="/categories/%E5%AF%A6%E4%BD%9C/">實作</a> / <a href="/categories/%E5%AF%A6%E4%BD%9C/GAN/">GAN</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2021/12/01/GAN-00/"><img src="/gallery/thumbnails/GAN.png" alt="GAN系列-00 Generative Adversarial Network 生成對抗網路"></a></figure><div class="media-content"><p class="date"><time dateTime="2021-12-01T06:00:00.000Z">2021-12-01</time></p><p class="title"><a href="/2021/12/01/GAN-00/">GAN系列-00 Generative Adversarial Network 生成對抗網路</a></p><p class="categories"><a href="/categories/%E5%AF%A6%E4%BD%9C/">實作</a> / <a href="/categories/%E5%AF%A6%E4%BD%9C/GAN/">GAN</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2020/06/10/NeuralNetwork-02/"><img src="/uploads/Triplet-Loss.png" alt="Neural Network-02 Triplet Loss Example at MNIST"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-06-10T13:00:32.000Z">2020-06-10</time></p><p class="title"><a href="/2020/06/10/NeuralNetwork-02/">Neural Network-02 Triplet Loss Example at MNIST</a></p><p class="categories"><a href="/categories/%E5%AF%A6%E4%BD%9C/">實作</a> / <a href="/categories/%E5%AF%A6%E4%BD%9C/Neural-Network/">Neural Network</a></p></div></article></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="訂閱"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Augustus</a><p class="is-size-7"><span>&copy; 2021 Augustus Hsu</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/AugustusHsu"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-TW");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到頁首" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此網站使用Cookie來改善您的體驗。",
          dismiss: "知道了！",
          allow: "允許使用Cookie",
          deny: "拒絕",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="請輸入關鍵字..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"請輸入關鍵字...","untitled":"(無標題)","posts":"文章","pages":"頁面","categories":"分類","tags":"標籤"});
        });</script></body></html>